YUI.add("moodle-mod_oublog-tagselector",function(e,t){M.mod_oublog=M.mod_oublog||{},M.mod_oublog.tagselector={init:function(t,n){var r=e.one("form #"+t);if(n&&typeof n=="object"){var i=[];for(var s in n)i.push(n[s]);n=i}r&&(r.plug(e.Plugin.AutoComplete,{minQueryLength:0,queryDelay:100,queryDelimiter:",",allowTrailingDelimiter:!0,source:n,width:"auto",scrollIntoView:!0,circular:!1,resultTextLocator:"tag",resultHighlighter:"startsWith",resultFilters:["startsWith",function(t,n){function u(e,t){return e.raw.tag<t.raw.tag?-1:e.raw.tag>t.raw.tag?1:0}var i="",s=r.get("value").lastIndexOf(",");s>0&&(i=r.get("value").substring(0,s).split(/\s*,\s*/)),i=e.Array.hash(i);var o=e.Array.filter(n,function(e){return!i.hasOwnProperty(e.text)});return o.sort(u)}],resultFormatter:function(t,n){return e.Array.map(n,function(e){var t='<div class="tagselector_result"><span class="tagselector_result_title">'+e.highlighted+"</span>";return e.raw.label&&(t+=' <span class="tagselector_result_info tagselector_result_info_label">'+e.raw.label+"</span>"),t+=' <span class="tagselector_result_info">'+M.util.get_string("numposts","oublog",e.raw.count)+"</span>"+"</div>",t})}}),r.on("focus",function(){r.ac.sendRequest("")}),r.ac.after("select",function(t){e.UA.chrome&&window.scrollBy(0,parseInt(r.getStyle("height"))+200),setTimeout(function(){r.ac.sendRequest(""),r.ac.show()},1)}))}}},"@VERSION@",{requires:["base","node","autocomplete","autocomplete-filters","autocomplete-highlighters"]});
